<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <script>
    function linkedList() {
        var Node = function(element) {
            this.el = element
            this.next = null
        }
        var length = 0

        var head = null
        // 为了展示用，回头撤掉
        this.head = head

        // 获取链表长度
        this.size = function() {
            return length
        }

        // 往末尾添加一个元素
        this.append = function(element) {
            var internalNode = new Node(element)
            var current
            if (head === null) {
                this.head = head = internalNode
            } else {
                current = head
                while (current.next) {
                    current = current.next
                }
                current.next = internalNode
            }
            length++
        }

        // 在指定位置添加一个新的项
        this.insert = function(position, element) {
            if (position >= 0 && position <= length) {
                var internalNode = new Node(element)
                var current = head
                var lastNode
                var index = 0
                if (!position) {
                    internalNode.next = head
                    this.head = head = internalNode
                } else {
                    while (index++ < position) {
                        lastNode = current
                        current = current.next
                    }
                    lastNode.next = internalNode
                    current !== null && (internalNode.next = current)
                }
                length++
                return true
            } else {
                return false
            }
        }

        // 从链表中移除指定位置的一项
        this.removeAt = function(position) {
            var current = head
            var lastNode
            var index = 0
            if (position >= 0 && position < length) {
                if (!position) {
                    this.head = head = current.next
                } else {
                    while (index++ < position) {
                        lastNode = current
                        current = current.next
                    }
                    lastNode.next = current.next
                }
                length--
                return current
            } else {
                return false
            }

        }

        // 返回指定元素的索引，没有这返回-1
        this.indexOf = function(value) {
            var current = head
            var tempLen = length
            while (tempLen--) {
                if (current.el === value) {
                    return length - tempLen - 1
                }
                current = current.next
            }
            return -1
        }

        // 移除指定一项
        this.remove = function(value) {
            var index = this.indexOf(value)
            return this.removeAt(index)
        }

        // 链表是否为空
        this.isEmpty = function() {
            return !length
        }

        this.toString = function() {
            var current = head,
                string = '';
            while (current) {
                string += current.el;
                current = current.next;
            }
            return string;
        }
    }

    // 提供方法有:append、insert、removeAt、indexOf、remove
    var instance = new linkedList()
    instance.append('头')
    instance.append('身体1')
    instance.append('身体2')
    instance.append('身体3')
    </script>
</body>

</html>